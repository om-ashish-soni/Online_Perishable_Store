package driverProduct;
import java.io.*;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;


class OrderComparator implements Comparator<Order>{
    public int compare(Order ord1,Order ord2){
        return ord1.getDate().compareTo(ord2.getDate());
    }
}
class DriverProduct{
	public void main() throws ClassNotFoundException, IOException{
		Product p1,p2,p3;
		p1=new Vegetable("Potato","The potato is one of some 150 tuber-bearing species of the genus Solanum");
		p2=new Food();
		p2.setName("Pizza");
		p2.setDescription(", dish of Italian origin consisting of a flattened disk of bread dough topped with some combination of olive oil, ");
		p3=new Fruit("Mango","A mango is a sweet tropical fruit");
        Date dt=new Date(30,12,2021);
        OrderedItem o1=new OrderedItem(p1,3);
        OrderedItem o2=new OrderedItem(p2,98);
        OrderedItem o3=new OrderedItem(p3,5);
        Order order1=new Order();
        order1.addOrderedItem(o1);   
        order1.setDate(dt);
        order1.addOrderedItem(o2);
        dt=new Date(25,12,2021);
        Order order2=new Order();
        order2.setDate(dt);
        order2.addOrderedItem(o3);
        // System.out.println(order1);
        // Order orderDuplicate=Order.getOrder(order2.getId());
        
        // System.out.println(orderDuplicate);
        Customer cust1=new Customer(" om ashish soni");
        cust1.addOrder(order1);
        Customer custDuplicate=Customer.getCustomer(cust1.id);
        custDuplicate.addOrder(order2);
        cust1.sortOrders();
//        System.out.println(custDuplicate);
        DataBase DB=new DataBase();
        DB.saveCustomer(cust1);
        Customer cust2=new Customer(" OAS");
        cust2.addOrder(order2);
        DB.saveCustomer(cust2);
        Customer loadedCustomer = null;
        try {
        	loadedCustomer = DB.loadCustomer(cust2.getId());
        }catch(Exception e) {
        	
        }
        
        System.out.print(loadedCustomer);
		System.out.println("Total number of products : "+Product.getNumberOfProducts());
	}
}


public class DriverBusinessDomainProduct{
	public static void main(String[] args) throws ClassNotFoundException, IOException{
		DriverProduct driverProduct=new DriverProduct();
		driverProduct.main();
	}
}

class OrderedItem implements Serializable{
	Product product=null;
	int quantity;
    public int getQuantity(){
        return this.quantity;
    }
	public OrderedItem(Product product,int quantity) {
		this.product=product;
		this.quantity=quantity;
	}
    // @Override
    public String toString(){
        return new String(this.product.toString()+"Quantity = "+this.quantity);
    }
}
class Food extends Product implements Serializable{
	
	public Food(){
	}
	public Food(String name,String description){
		super(name,description,"Food");
	}
	public String getType(){
		return new String("Food");
	}
	public String toString(){
		String str=new String();
		str="\ntype = "+this.getType()+" ; \nid = "+this.getId()+" ; \n"+"name = "+this.getName()+" ; \n"+"description = "+this.getDescription()+"\n"+"price = "+this.getPrice()+"\n";
		return str;
	}
}
class Fruit extends Product implements Serializable{
	
	
	
	public Fruit(){
	}
	public Fruit(String name,String description){
		super(name,description,"Fruit");
	}
	public String getType(){
		return new String("Fruit");
	}
	public String toString(){
		String str=new String();
		str="\ntype = "+this.getType()+" ; \nid = "+this.getId()+" ; \n"+"name = "+this.getName()+" ; \n"+"description = "+this.getDescription()+"\n"+"price = "+this.getPrice()+"\n";
		return str;
	}
}
abstract class Product implements Serializable{
	static int numberOfProducts;
	static HashMap<String,Double> priceOf=new HashMap<String,Double>();
	static HashMap<String,Integer> availableQuantityOf=new HashMap<String,Integer>();
	String name,description,type;
	int id;
	double price;
	static{
		numberOfProducts=0;
		priceOf.put("mango",60.00);
		priceOf.put("pizza", 90.00);
		priceOf.put("potato", 40.00);
		availableQuantityOf.put("mango",50);
		availableQuantityOf.put("pizza", 40);
		availableQuantityOf.put("potato", 100);
	}
	
	public static int getNumberOfProducts(){
		return numberOfProducts;
	}
	private void generateId() {
		this.id=numberOfProducts;
	}
	private void setPrice() {
		if(priceOf.containsKey(this.getName().toLowerCase())) {
			this.price=priceOf.get(this.getName().toLowerCase());
		}
	}
	public void setName(String name){
		this.name=name;
	}
	public void setDescription(String description){
		this.description=description;
	}
	public int getId(){
		return this.id;
	}
	public String getName(){
		return this.name;
	}
	public String getDescription(){
		return this.description;
	}
	public String getType(){
		return new String("Default Product");
	}
	public double getPrice() {
		return this.price;
	}
	public Product(){
		Product.numberOfProducts++;
	}
	public Product(String name,String description,String type){
		Product.numberOfProducts++;
		generateId();
		this.name=name;
		this.description=description;
		this.type=type;
		setPrice();
	}
	public String toString(){
		String str=new String();
		str="\nid = "+id+" ; \n"+"name = "+name+" ; \n"+"description = "+description+"\n"+"price = "+price+"\n";
		return str;
	}
}
class Vegetable extends Product implements Serializable{
	
	public Vegetable(){
	}
	public Vegetable(String name,String description){
		super(name,description,"Vegetable");
	}
	public String getType(){
		return new String("Vegetable");
	}
	public String toString(){
		String str=new String();
		str="\ntype = "+this.getType()+" ; \nid = "+this.getId()+" ; \n"+"name = "+this.getName()+" ; \n"+"description = "+this.getDescription()+"\n"+"price = "+this.getPrice()+"\n";
		return str;
	}
}